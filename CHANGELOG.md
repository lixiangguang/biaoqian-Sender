# 更新日志 (CHANGELOG)

## [v1.0.2] - 2025-06-29

### 🔧 API兼容性修复
- **修复SendTypingText方法错误**: 移除wxauto V2中已废弃的`SendTypingText`方法调用
- **统一消息发送接口**: 所有消息发送统一使用`SendMsg`方法
- **配置文件更新**: 移除`enable_typing_mode`配置选项，添加废弃说明
- **代码注释优化**: 添加详细的修改记录和API变更说明

### 🧪 测试验证
- **新增测试脚本**: `test_message_fix.py`用于验证API修复效果
- **功能验证**: 确认消息发送、联系人管理等核心功能正常
- **微信连接测试**: 验证wxauto V2客户端连接功能

### 📝 技术改进
- **错误处理**: 改进异常捕获和错误信息提示
- **代码规范**: 按照项目编码规范添加修改标记
- **向后兼容**: 保持原有功能接口不变

## [修复版本] - 2024-12-19

### 🐛 Bug修复
- **修复wxauto V2 API兼容性问题**
  - 移除了不存在的 `GetAllFriends()` 方法调用
  - 解决了 `'WeChat' object has no attribute 'GetAllFriends'` 错误
  - 更新了 `sync_from_wechat()` 方法，提供替代方案说明

### ✨ 新增功能
- **手动添加联系人功能**
  - 新增 `add_contact()` 方法支持手动添加联系人
  - 支持设置联系人类型（好友/群聊/系统）
  - 支持添加多个标签
  - 自动检查重复联系人

- **增强用户界面**
  - 主菜单新增"4. 手动添加联系人"选项
  - 主菜单新增"5. 从微信同步联系人"选项
  - 更新菜单选择范围为 0-5
  - 添加详细的用户交互提示

### 🔧 技术改进
- **代码结构优化**
  - 更新函数调用关系图
  - 添加详细的错误处理和日志记录
  - 完善代码注释和文档

- **替代方案提供**
  - 当wxauto V2无法直接获取好友列表时，提供3种替代方案：
    1. 手动添加联系人
    2. 从聊天记录中提取
    3. 导入联系人列表

### 📝 文档更新
- 更新文件头部变更记录
- 添加测试验证脚本 `test_fix.py`
- 创建更新日志文档

### 🧪 测试验证
- ✅ ContactManager初始化正常
- ✅ 手动添加联系人功能正常
- ✅ 同步功能运行正常（提供替代方案）
- ✅ 联系人列表显示正常
- ✅ 程序启动和菜单显示正常

### 💡 使用建议
由于wxauto V2版本的API变化，建议用户：
1. 使用"手动添加联系人"功能逐个添加需要的联系人
2. 为联系人设置合适的标签进行分类管理
3. 定期备份联系人数据

---

## [初始版本] - 2024-12-19

### ✨ 初始功能
- 微信标签联系人消息发送器基础框架
- 联系人管理模块
- 消息发送模块
- 日志管理系统
- 配置管理系统
- 基础测试框架